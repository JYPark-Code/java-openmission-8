-- 유저 샘플 데이터
INSERT INTO site_user (id, username, password, email, create_date, bio) VALUES
(1, 'admin',  '$2a$10$7EqJtq98hPqEX7fNZaFWoOhi5yhcXoZ4r9qS4UzQ5K1p8zZWDu9q', 'admin@example.com',  '2025-11-10 10:00:00', '관리자 계정입니다.'),
(2, 'qwer', '$2a$10$7EqJtq98hPqEX7fNZaFWoOhi5yhcXoZ4r9qS4UzQ5K1p8zZWDu9q', 'qwer@example.com', '2025-11-15 09:30:00', '백엔드와 스프링 공부 중입니다.'),
(3, 'guest',  '$2a$10$7EqJtq98hPqEX7fNZaFWoOhi5yhcXoZ4r9qS4UzQ5K1p8zZWDu9q', 'guest@example.com',  '2025-11-18 14:20:00', '게스트 사용자입니다.');



-- 질문 샘플 데이터
INSERT INTO question (id, subject, content, create_date, modify_date, author_id, view_count) VALUES
(1,
 '스프링 부트에서 JPA 지연 로딩 N+1 문제 어떻게 해결하나요?',
 '# 질문\n\n스프링 부트 + JPA 환경에서 지연 로딩 때문에 N+1 문제가 발생합니다.\n\n어떻게 튜닝하는 것이 좋을까요?\n\n- fetch join\n- EntityGraph\n- Batch size\n\n등을 고민 중입니다.',
 '2025-11-16 10:15:00',
 NULL,
 2,
 45
),
(2,
 'Spring Security에서 CSRF 설정을 어떻게 가져가는 것이 좋을까요?',
 '# 배경\n\n게시판 프로젝트에 Spring Security를 붙였는데, CSRF 때문에 폼 전송이 자꾸 막힙니다.\n\n로그인/로그아웃, 댓글, 추천 기능까지 고려했을 때, CSRF를 어떤 기준으로 켜고 끄는 것이 좋을까요?',
 '2025-11-16 11:00:00',
 NULL,
 2,
 32
),
(3,
 'MySQL 인덱스 설계 기준이 궁금합니다.',
 '실무용 게시판에서 어떤 컬럼에 인덱스를 두면 좋을지 궁금합니다.\n\n- title(제목)\n- create_date(생성일)\n- author_id(작성자)\n\n조합 인덱스를 어떻게 잡는 게 좋을까요?',
 '2025-11-17 09:20:00',
 NULL,
 1,
 18
),
(4,
 '타임리프에서 마크다운을 렌더링할 때 XSS는 어떻게 방어하나요?',
 '공통 유틸로 markdown을 HTML로 변환해서 보여주고 있는데,\n스크립트 인젝션 같은 걸 어떻게 막아야 할까요?',
 '2025-11-18 13:45:00',
 NULL,
 2,
 21
),
(5,
 '마이페이지 기능을 설계할 때 어떤 정보를 보여주면 좋을까요?',
 '사용자 입장에서 마이페이지에 있으면 좋은 정보, 경험 공유 부탁드립니다.\n\n지금은 작성한 질문/답변/댓글/추천 내역 + 프로필 정도를 생각 중입니다.',
 '2025-11-19 09:00:00',
 NULL,
 2,
 7
);



-- 답변 샘플 데이터
INSERT INTO answer (id, content, create_date, modify_date, question_id, author_id) VALUES
(1,
 'N+1 문제는 보통 **fetch join** 또는 **EntityGraph**로 많이 해결합니다.\n\n조회 전용 쿼리에서는 Dto로 바로 뽑는 것도 고려해보세요.',
 '2025-11-16 12:00:00',
 NULL,
 1,
 1
),
(2,
 '또한 컬렉션에 `@BatchSize`를 설정하면, N+1을 완전히 없애진 못해도 쿼리 수를 크게 줄일 수 있습니다.',
 '2025-11-16 13:10:00',
 NULL,
 1,
 3
),
(3,
 'CSRF는 **폼 기반 POST 요청**에는 유지하고, API 스타일인 경우에는 토큰 기반 인증과 함께 비활성화하기도 합니다.\n\n지금처럼 게시판/로그인/댓글 위주라면 기본 설정을 따르되, GET/HEAD/TRACE/OPTIONS만 허용하는 방향이 좋습니다.',
 '2025-11-16 11:30:00',
 NULL,
 2,
 1
),
(4,
 '개발 단계에서는 일단 CSRF를 꺼두고, 기능이 어느 정도 안정화되면 다시 켜고 하나씩 CSRF 토큰을 붙여가는 방식도 실무에서 자주 사용합니다.',
 '2025-11-16 11:50:00',
 NULL,
 2,
 2
),
(5,
 '제목 + 작성일 + 작성자 조합 인덱스를 고려해볼 수 있습니다.\n\n하지만 실제 쿼리 패턴을 먼저 분석하고, `EXPLAIN` 결과를 보면서 조정하는 게 안전합니다.',
 '2025-11-17 11:00:00',
 NULL,
 3,
 1
),
(6,
 '마크다운 렌더링 결과를 한 번 더 sanitizer(예: Jsoup)로 필터링해서, 스크립트 관련 태그를 제거하는 것이 좋습니다.',
 '2025-11-18 14:10:00',
 NULL,
 4,
 1
),
(7,
 '마이페이지에는 **최근 활동(질문/답변/댓글)**, **가입 후 경과일**, **추천한 글 목록**이 있으면 개인 대시보드 느낌이 나서 좋습니다.',
 '2025-11-19 10:10:00',
 NULL,
 5,
 3
),
(8,
 '추가로, 비밀번호 변경/이메일 변경/자기소개 편집 정도까지 있으면 대부분의 유스케이스는 커버됩니다.',
 '2025-11-19 10:30:00',
 NULL,
 5,
 2
);



-- 댓글 샘플 데이터 (최상위 + 대댓글)

-- Q1 / A1에 달린 댓글들
INSERT INTO comment (id, content, create_date, modify_date, author_id, answer_id, parent_id) VALUES
(1,
 'fetch join 예시는 어떤 식으로 작성하는지 궁금합니다.',
 '2025-11-16 12:30:00',
 NULL,
 2,
 1,
 NULL
),
(2,
 'BatchSize는 전역 설정이랑 개별 설정 중에 어떤 걸 추천하시나요?',
 '2025-11-16 12:40:00',
 NULL,
 3,
 1,
 NULL
),
-- (1번 댓글의 대댓글)
(3,
 '간단한 예시는 `select q from Question q join fetch q.answerList` 이런 식으로 시작하시면 됩니다.',
 '2025-11-16 12:50:00',
 NULL,
 1,
 1,
 1
),

-- Q2 / A3에 달린 댓글들
(4,
 'CSRF를 완전히 끄는 건 위험하겠죠?',
 '2025-11-16 11:55:00',
 NULL,
 2,
 3,
 NULL
),
(5,
 '내부망/개인 프로젝트라면 잠깐 끄고 개발해도 되지만, 외부에 공개될 서비스라면 꼭 다시 켜두는 걸 추천드립니다.',
 '2025-11-16 12:05:00',
 NULL,
 1,
 3,
 4
),

-- Q4 / A6에 달린 댓글들
(6,
 'Jsoup으로 허용 태그만 whitelisting 하는 방식이 좋아 보이네요.',
 '2025-11-18 14:30:00',
 NULL,
 2,
 6,
 NULL
),

-- Q5 / A7, A8에 달린 댓글들
(7,
 '마이페이지에 “내가 쓴 댓글이 달린 질문들”도 있으면 좋을 것 같아요.',
 '2025-11-19 10:40:00',
 NULL,
 2,
 7,
 NULL
),
(8,
 '좋은 아이디어네요. activity feed 같은 느낌으로 확장해볼 수 있겠어요.',
 '2025-11-19 10:50:00',
 NULL,
 1,
 7,
 7
),
(9,
 '임시 비밀번호 발급/비밀번호 변경 UI까지 구현해두셨다면 충분히 실서비스 느낌 납니다.',
 '2025-11-19 11:00:00',
 NULL,
 3,
 8,
 NULL
);
